apiVersion: batch/v1
kind: Job
metadata:
  name: doctor
  namespace: demo
spec:
  template:
    spec:
      containers:
      - name: doctor
        env:
        - name: MONGODB_NAME
          value: "source"
        - name: MONGODB_NAMESPACE
          value: "demo"
        resources:
          requests:
            cpu: 1
            memory: 1Gi
        image: arnobkumarsaha/mongo-doctor
        imagePullPolicy: Always
      serviceAccountName: mongo-doctor
      restartPolicy: Never
  backoffLimit: 4